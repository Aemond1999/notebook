# Linux

## 一，文件目录

| 目录 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| bin  | 存放二进制可执行文件(ls,cat,mkdir等)，常用命令一般都在这里。 |
| sbin | 存放特权指令，只有root才能访问。                             |
| etc  | 存放配置文件                                                 |
| home | 存放所有用户文件的根目录                                     |
| usr  | 它是 unix 系统中最重要的目录之一，涵盖了二进制文件，各种文档，各种头文件，x，还有各种库文件；还有诸多程序，例如 ftp，telnet 等等 |
| lib  | 库文件目录 ，包含了所有对系统有用的库文件。简单来说，它是应用程序、命令或进程正确执行所需要的文件 |
| opt  | 存放第三方软件                                               |
| mnt  | 系统管理员可以挂载其他临时文件系统                           |
| boot | 存放用于系统引导时使用的各种文件                             |
| tmp  | 存放临时文件                                                 |
| var  | 用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件 |
| dev  | 用于存放设备文件                                             |
| proc | 虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息 |

## 二，常用命令

### 文件目录相关

#### ls：列出目录的内容

```sh
ls [可选参数]
-l：以长格式列出当前目录中的文件和子目录，包括文件权限、所有者、文件大小、修改日期等详细信息。
-a：列出当前目录中的所有文件和子目录，包括隐藏文件和目录。
-h：以人类可读的格式列出文件大小，例如，使用KB、MB、GB等单位。

```

#### mkdir：创建文件夹

```shell
mkdir [选项] 目录名
-p ：递归创建所需要的目录
```

#### rm:删除文件

```shell
rm [选项]] 目录名
-i	逐个确认要删除的文件。
-f	强制删除，忽略不存在的文件，无需提示
-r	递归地删除目录下的内容，删除文件夹时必须加此参数
```

#### touch：创建文件

```sh
touch 文件名
```

#### cp：文件复制

```shell
cp [选项] 源文件 目的文件
-r：如果拷贝文件夹需要加-r参数

cp 1.txt 2.txt linux.txt word/ #复制多个文件
cp *.txt word/ #利用通配符复制文件
```

#### mv :移动或重命名文件

```shell
mv [选项] 旧文件名 新文件名 #重命名文件：
mv [选项] 源文件 目标目录 #移动文件/文件夹
-b	当覆盖文件时会对被覆盖文件进行先行备份。
-i	交互式操作，当目标文件已经存在时，会询问是否覆盖。
-n	如果目标文件已经存在，则mv命令不会进行对目标文件进行覆盖；如果目标文件不存在，则mv命令会执行正常的移动操作
-u	只有在源文件比目标文件新或者目标文件不存在时才进行操作。
-f	强制操作，不进行任何提示，如果目标存在时，会直接覆盖。
```

#### tar 压缩或解压文件

```shell
tar -zcvf 压缩包名 文件 #压缩
tar -zxvf 压缩包名 [-C 目标目录] #解压，默认压缩到当前目录，如果要将存档文件解压缩到不同目录，则可以使用 -C 选项指定目标目录
```

#### ln：建立链接文件

```shell
软链接：ln -s 源文件 链接文件
硬链接：ln 源文件 链接文件
#软链接类似于Windows下的快捷方式，如果软链接文件和源文件不在同一个目录，源文件要使用绝对路径，不能使用相对路径。
#硬链接只能链接普通文件不能链接目录。 两个文件占用相同大小的硬盘空间，即使删除了源文件，链接文件还是存在
```

### 文件查找

#### grep:文本搜索

```shell
grep [-选项] '搜索字符串' 文件名
-c	只统计匹配的行数
-v	排除匹配结果
-n	显示行号
-i	不区分大小写
-w	只匹配过滤的单词
-o	只输出匹配的内容
```

#### find：文件搜素

````shell
find 目录 -name 文件名 #根据文件名查找	
find 目录 -size -文件大小	#根据文件大小查找 +:大于,-:小于,=等于
-perm xxxx：权限为 xxxx的文件或目录
-user： 按照文件属主来查找文件。
-size n : n单位,b:512位元组的区块,c:字元数,k:kilo bytes,w:二个位元组
-mount, -xdev : 只检查和指定目录在同一个文件系统下的文件，避免列出其它文件系统中的文件
-amin n : 在过去 n 分钟内被读取过
-anewer file : 比文件 file 更晚被读取过的文件
-atime n : 在过去n天内被读取过的文件
-cmin n : 在过去 n 分钟内被修改过
-cnewer file :比文件 file 更新的文件
-ctime n : 在过去n天内被修改过的文件
-empty : 空的文件
-gid n or -group name : gid 是 n 或是 group 名称是 name
-ipath p, -path p : 路径名称符合 p 的文件，ipath 会忽略大小写
-name name, -iname name : 文件名称符合 name 的文件。iname 会忽略大小写
-type 查找某一类型的文件：
b - 块设备文件
d - 目录
c - 字符设备文件
p - 管道文件
l - 符号链接文件
f - 普通文件
````

### 文件内容查看

#### cat：由第一行开始显示文件全部内容

```shell
cat [参数] 文件路径
-b ：列出行号，空白行不标行号
-n ：列出行号，连同空白行也会有行号
```

#### tac：与cat命令刚好相反，文件内容从最后一行开始显示

#### more：分屏显示

```shell
more 文件路径
#空白键 ：代表向下翻一页；
#Enter ：代表向下翻『一行』；
#/字符串 ：向下搜寻字符串
#:f ：立刻显示出档名以及目前显示的行数；
#q ：代表立刻离开 more ，不再显示该文件内容。
#b ：代表往回翻页，不过这动作只对文件有用，对管线无用。
```

#### less：分屏显示

```shell
less 文件路径
#空白键 ：向下翻动一页；
#[pagedown]：向下翻动一页；
#[pageup] ：向上翻动一页；
#/字符串 ：向下搜寻字符串
#?字符串 ：向上搜寻字符串；
#n ：重复前一个搜寻 
#N ：反向的重复前一个搜寻 
#q ：离开 less 这个程序；

```

#### head：取出前面几行

```shell
head [-n number] 文件路径
```

#### tail：取出后面几行

```
tail [-n number] 文件路径
```

### 权限管理

#### chmod：修改文件权限

```shell
chmod 权限 文件路径
```

#### chown：修改文件所有者

```shell
chown 用户名 文件路径
```

#### chgrp：修改文件所有组

```shell
chgrp 组名 文件路径
```

#### sudo：临时获得root权限

```shell
sudo [选项] 命令

#1.设置了可执行sudo指令的用户
1.编辑在/etc/sudoers

2.允许root用户执行任意路径下的任意命令 
root          ALL=(ALL)       ALL  NOPASSWD: ALL
3.允许wheel用户组中的用户执行所有命令  
%wheel        ALL=(ALL)       ALL
4.允许wheel用户组中的用户在不输入该用户的密码的情况下使用所有命令
%wheel        ALL=(ALL)       NOPASSWD: ALL
```

### 用户管理

#### useradd:添加用户

```shell
useradd [选项] 用户名
-d	指定用户登录系统时的主目录
-g	指定组名称
```

#### userdel：删除用户

````
userdel 用户名	删除用户，但不会自动删除用户的主目录
userdel -r 用户名	删除用户，同时删除用户的主目录
````

#### usermod：修改用户

```shell
修改用户所在组：usermod -g 用户组 用户名
修改用户的家目录位置：usermod -d 家目录 用户名
```

#### groupadd：增加用户组

```shell
groupdel 用户组名
```

#### groupmod:修改用户组

```shell
groupmod -g 新组号 组名 #修改组号
groupmod  -n 新组名 组名 #修改组名
```

#### groupdel：删除组

### 日期类

#### date：输出当前日期

```sh
date "+%Y-%m-%d %H:%M:%S"
```

## 系统管理

### ps：查看进程信息

```shell
ps [选项]
-e     显示所有进程
-f     显示所有字段（UID，PPIP，C，STIME字段）
-a     显示一个终端的所有进程
-u     显示当前用户进程和内存使用情况
-x     显示没有控制终端的进程
--sort 按某个字段排序 #+、-号可以调整排序，-pcpu 表示降序，+pcpu 表示升序，ps -aux --sort=-pcpu | head -11
···················································································································
ps -ef：查看所有进程
#UID：用户ID，即进程的拥有者
#PID：进程ID
#PPID：父进程ID
#C：进程占用的CPU百分比
#STIME：进程开始启动时间
#TTY：登入者的终端机位置
#TIME：进程使用的CPU（运算）时间
#CMD：调用进程的命令
···················································································································
ps -aux：查看所有进程
#USER：创建进程的用户
#PID：进程ID
#%CPU：进程占用CPU的百分比
#%MEM：进程占用物理内存的百分比
#VSZ：进程占用虚拟内存的大小（单位KB）
#RSS：进程占用实际物理内存的大小（单位KB）
#TTY：进程在哪个终端运行。
#STAT：进程状态
#START：进程开始启动的时间
#TIME：进程使用的CPU（运算）时间
#COMMAND：调用进程的命令

```

### pstree

```shell
pstree [选项]
-a：显示进程的完整命令行（包括参数）。
-p：显示进程的 PID。
-u：显示进程的所属用户。
-h：高亮显示当前终端对应的进程。
-n：按照 PID 排序进程树（默认是按照进程名称排序）。
-T：显示进程的线程信息。
-A：用 ASCII 字符显示树状结构。
-U：用 UTF-8 字符显示树状结构（默认）。
--help：显示 pstree 命令的帮助信息。
```

### top：动态监控进程

```shell
top - 17:54:28 up 13:49,  4 users,  load average: 0.02, 0.02, 0.05
Tasks: 231 total,   1 running, 230 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.0 sy,  0.0 ni, 99.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem :  2027896 total,   224384 free,   941344 used,   862168 buff/cache
KiB Swap:  2097148 total,  2097148 free,        0 used.   882324 avail Mem 
#第一行
17:54:28    #当前系统时间
up 13:49min #系统运行时间
4 users     #当前登录用户
load average: 0.00, 0.00, 0.00 #average后面的三个数分别是1分钟、5分钟、15分钟的负载情况。load average数据是每隔5秒钟检查一次活跃的进程数，然后按特定算法计算出的数值。如果这个数除以逻辑CPU的数量，结果高于5的时候就表明系统在超负荷运转了
#第二行
总进程:231 total
运行:1 running
休眠:230 sleeping
停止: 0 stopped
僵尸进程: 0 zombie
#第三行
0.1%us【user space】— 用户空间占用CPU的百分比。
0.0%sy【sysctl】— 内核空间占用CPU的百分比。
0.0%ni【】— 改变过优先级的进程占用CPU的百分比
99.9%id【idolt】— 空闲CPU百分比
0.0%wa【wait】— IO等待占用CPU的百分比
0.0%hi【Hardware IRQ】— 硬中断占用CPU的百分比
0.0%si【Software Interrupts】— 软中断占用CPU的百分比
#第四行 内存状态
2027896 total,   224384 free,   941344 used,   862168 buff/cache
#第五行 交换区状态
2097148 total,  2097148 free,        0 used.   882324 avail Mem 

top [选项]

-d：指定每两次屏幕信息刷新之间的时间间隔。当然用户可以使用s交互命令来改变之。
-p:通过指定监控进程ID来仅仅监控某个进程的状态。
-q:该选项将使top没有任何延迟的进行刷新。如果调用程序有超级用户权限，那么top将以尽可能高的优先级运行。
-S：指定累计模式。
-s：使top命令在安全模式中运行。这将去除交互命令所带来的潜在危险。
-i：使top不显示任何闲置或者僵死进程。
-c:显示整个命令行而不只是显示命令名。

```

### kill：杀死进程

```shell
kill -9 进程号#强制杀死进程
killall 进程名#杀死进程及其子进程
```

### 修改ip地址

```shell
#1.输入命令 vim  /etc/sysconfig/network-scripts/ifcfg-ens33 ,最后的ifcfg-ens33不是固定的，是取决于网络接口的名称
#2.修改
BOOTPROTO=static 
none：手动指定IP地址、子网掩码、网关等网络配置信息，不使用DHCP协议进行自动获取。
static：手动指定IP地址、子网掩码、网关等网络配置信息，但是需要使用DHCP服务器分配DNS服务器地址。
dhcp：使用DHCP协议自动获取IP地址、子网掩码、网关、DNS服务器等网络配置信息。
bootp：使用BOOTP协议自动获取IP地址、子网掩码、网关等网络配置信息。
ONBOOT=yes            # 指定网卡设备是否在系统启动时自动激活
IPADDR=192.168.1.10   # 设置为您的静态IP地址
NETMASK=255.255.255.0 # 设置为您的网络掩码
GATEWAY=192.168.1.1   # 设置为您的网关地址
DNS1=8.8.8.8          # 设置为首选DNS服务器
DNS2=8.8.4.4          # 设置为备用DNS服务器
#3.输入命令 systemctl restart network
```

### systemctl

```shell
#1.设置操作系统运行级别
systemctl set-default multi-user.target #将当前操作系统设置为多用户有网络命令行界面
systemctl set-default graphical.target  #当前操作系统设置为多用户图形化界面
#2.基本语法
systemctl start | stop | restart | status 服务名
#3.查看所有服务
cd /usr/lib/systemd/system
#4.关掉指定服务的自动启动
systemctl disable service_name
#4.开启指定服务的自动启动
systemctl enable service_name
```

### crontab：定时任务

```shell
crontab -e #编辑定时任务
crontab -l #查看定时任务
crontab -r #删除定时任务
crontab -u #指定其他用户
crontab文件的含义：用户所建立的crontab文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，格式如下：
minute hour day month week command 顺序：分 时 日 月 周
●minute： 表示分钟，可以是从0到59之间的任何整数。
●hour：表示小时，可以是从0到23之间的任何整数。
●day：表示日期，可以是从1到31之间的任何整数。
●month：表示月份，可以是从1到12之间的任何整数。
●week：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。
●command：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。

在以上各个字段中，还可以使用以下特殊字符：
●星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。
●逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”
●中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”
●正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，
```

## 磁盘管理

### du：查看文件和目录占用的磁盘空间

```sh
du [参数] 文件或目录
-h:提高文件可读性
-a:查看文件大小
-s:仅显示总计，只列出最后加总的值
```

### df：查看磁盘使用情况

```sh
df -h
```

### lsblk ：查看设备挂载情况

```
lsblk -f 

NAME: 设备名称（如 sda 是磁盘，sda1 是分区）。

TYPE: 设备类型（disk 表示物理磁盘，part 表示分区）。

MOUNTPOINT: 挂载点路径，如果为空则表示未挂载。
```

## 管道命令

### wc：统计

```shell
wc [选项] 文件名
-l: 统计行数
-w：统计英文单词
-m：统计字符数
```

### cut：可以根据条件从命令结果中提取对应内容

```shell
cut [选项（必选）]  filename
-d：分隔符，按照指定分隔符分割列。与 -f 一起使用
-f n1,n2：依据 -d 的分隔字符将一段信息分割成为数段，用 -f 取出第几段的意思（列号，提取第几列）
          n：只显示第n项
          n-：显示 从第n项 一直到行尾
          n-m：显示 从第n项 到 第m项(包括m)
-c：以字符 (characters) 的单位取出固定字符区间
-b：以字节为单位进行分割
```

### sort：可针对文本文件的内容，以行为单位来排序。

```shell
sort [选项] 文件名
-b	忽略行首的空白字符
-d	按字典顺序进行排序，忽略非字母数字字符
-g	按一般数值进行排序
-i	不区分大小写进行排序
-M	按月份进行排序
-n	按数值进行排序
-r	反向排序
-t	指定字段分隔符
-k	指定要排序的列 与-t搭配使用
-u  去重
```

### tee：可以将命令结果 **通过管道** 输出到 **多个文件**中

```shell
cat 5.txt | tee a.txt b.txt c.txt
```

### tr：用于 **替换** 或 **删除** 文件中的字符

```shell
命令结果 | tr 被替换的字符 新字符
命令结果 | tr -d 被删除的字符
```

### split：将大文件 **切分成** 若干小文件

```shell
split -b 10k 文件 #将大文件切分成若干10KB的小文件
split -l 6 文件 #每六行分割成一个文件 
```

## 软件包管理

### rpm

RPM是Red Hat公司随Redhat Linux推出了一个软件包管理器，通过它能够更加轻松容易地实现软件的安装。

```shell
rpm -ivh <rpm包名> 安装软件
rpm -e <rpm包名> 卸载安装
rpm -qa | grep xxx 查询软件是否安装（包括相关依赖）
rpm -Uvh <rpm包名> 升级一个rpm
```

### yum

yum（ Yellow dog Updater, Modified）是一个在Fedora和RedHat以及SUSE中的Shell前端软件包管理器。

基於RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。

```shell
列出所有可更新的软件清单命令：yum check-update
更新所有软件命令：yum update
仅安装指定的软件命令：yum install <package_name>
仅更新指定的软件命令：yum update <package_name>
显示包信息：yum info <package_name>
列出所有可安裝的软件清单命令：yum list
删除软件包命令：yum remove <package_name>
查找软件包 命令：yum search <keyword>
```

### 



